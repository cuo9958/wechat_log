# 小程序的日志库

## 使用方式

小程序启动的时候记得调用初始化方法，该方法会判断是否创建日志缓存。如果不是第一次启动会恢复上次的记录。

日志开放了基础使用方法

```javascript
//记录日志
addLog("日志标题，列表展示用", { data: "自定义数据用" }, { opts: "自定义数据2" });
//获取日志列表，只会返回标题和id。页码从0开始
getLogList(0);
//清理所有日志
clearLog();
//根据id获取日志的详情
getLogInfo();
```

## 实现原理

1. 日志分索引部分和存储部分。
2. 索引主要存在内存中，加快写入和读取速度。缓存中保留了一份备份，重新打开的时候不会丢失索引。
3. 索引记录了日志的存储位置，使用的是字节序号。
4. 日志主体保存在文件系统中，利用字节码的位置快速读取文件内容
5. 使用队列保证写入的顺序，防止并发冲突
